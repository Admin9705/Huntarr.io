<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scheduling Feature - Huntarr.io Documentation</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/features.css">
</head>
<body>
    <div class="sidebar">
        <div class="sidebar-logo">
            <img src="../images/huntarr-logo.png" alt="Huntarr Logo">
            <h2>Huntarr.io</h2>
        </div>
        
        <div class="sidebar-menu">
            <div class="menu-section">
                <h3>Main Navigation</h3>
                <ul>
                    <li><a href="../index.html"><svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg> Home</a></li>
                    <li><a href="../apps/index.html"><svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"></path></svg> Apps</a></li>
                    <li><a href="../settings/index.html"><svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"></path></svg> Settings</a></li>
                </ul>
            </div>
            
            <div class="menu-section">
                <h3>Features</h3>
                <ul>
                    <li class="active"><a href="scheduling.html"><svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"></path></svg> Scheduling</a></li>
                    <li><a href="logs.html"><svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"></path></svg> Logs</a></li>
                    <li><a href="history.html"><svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"></path></svg> History</a></li>
                </ul>
            </div>
            
            <div class="menu-section">
                <h3>External Resources</h3>
                <ul>
                    <li><a href="https://github.com/plexguide/Huntarr.io" target="_blank"><svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg> GitHub</a></li>
                    <li><a href="https://plexguide.github.io/Huntarr.io/" target="_blank"><svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2.033 16.01c.564-1.789 1.632-3.932 1.821-4.474.273-.787-.211-1.136-1.74.209l-.34-.64c1.744-1.897 5.335-2.326 4.113.613-.763 1.835-1.309 3.074-1.621 4.03-.455 1.393.694.828 1.819-.211.153.25.203.331.356.619-2.498 2.378-5.271 2.588-4.408-.146zm4.742-8.169c-.532.453-1.32.443-1.761-.022-.441-.465-.367-1.208.164-1.661.532-.453 1.32-.442 1.761.022.439.466.367 1.209-.164 1.661z"></path></svg> Website</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="content">
        <div class="header">
            <h1>Scheduling Feature</h1>
            <div class="breadcrumbs">
                <a href="../index.html">Home</a> &gt; <a href="#">Features</a> &gt; <span>Scheduling</span>
            </div>
        </div>
        
        <div class="content-section">
            <h2 class="section-header">Overview</h2>
            <p>
                Huntarr's scheduling system allows you to automate tasks across all your media applications. 
                With this powerful feature, you can schedule regular maintenance, upgrades, and other operations 
                to run automatically at specified times and days.
            </p>

            <div class="info-box">
                <div class="info-title">
                    <svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path>
                    </svg>
                    Important Note
                </div>
                <p>
                    Schedules are stored in Docker container at <code>/config/scheduler/schedule.json</code> and persist 
                    through container updates. No data is stored in browser localStorage.
                </p>
            </div>
        </div>
        
        <div class="content-section">
            <h2 class="section-header">Schedule Types</h2>
            <p>
                Huntarr's scheduler supports two main categories of schedules:
            </p>
            
            <div class="card-container">
                <div class="feature-card">
                    <div class="feature-title">Global Schedules</div>
                    <p>
                        Actions that apply to the entire Huntarr system or multiple applications at once.
                        These schedules are not tied to a specific application instance.
                    </p>
                </div>
                
                <div class="feature-card">
                    <div class="feature-title">App-Specific Schedules</div>
                    <p>
                        Actions that target specific instances of applications like Sonarr, Radarr, Lidarr, Readarr, 
                        or Whisparr. Each app type has its own set of available actions.
                    </p>
                </div>
            </div>
        </div>
        
        <div class="content-section">
            <h2 class="section-header">Creating Schedules</h2>
            <p>
                To create a new schedule, follow these steps:
            </p>
            
            <ol class="steps-list">
                <li>
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Navigate to the Scheduling Page</h3>
                        <p>Access the Scheduling feature from the main sidebar navigation.</p>
                    </div>
                </li>
                
                <li>
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Click "Add Schedule"</h3>
                        <p>This will open the schedule creation form.</p>
                    </div>
                </li>
                
                <li>
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Configure Schedule Settings</h3>
                        <p>You'll need to specify several parameters:</p>
                        <ul>
                            <li><strong>App Type:</strong> Select Global, Sonarr, Radarr, Lidarr, Readarr, or Whisparr</li>
                            <li><strong>Action:</strong> Choose the operation you want to perform</li>
                            <li><strong>App Instance:</strong> (For app-specific schedules) Select which instance to target</li>
                            <li><strong>Time:</strong> Set the time when the action should run</li>
                            <li><strong>Days:</strong> Select which days of the week this schedule should run</li>
                            <li><strong>Enabled:</strong> Toggle whether the schedule is active or paused</li>
                        </ul>
                    </div>
                </li>
                
                <li>
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>Save the Schedule</h3>
                        <p>
                            Click "Save" to create your schedule. The system will assign it a unique ID and add it to 
                            the appropriate category.
                        </p>
                    </div>
                </li>
            </ol>
        </div>
        
        <div class="content-section">
            <h2 class="section-header">Available Actions</h2>
            <p>
                Each application type has different actions available:
            </p>
            
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>App Type</th>
                            <th>Available Actions</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Global</td>
                            <td>System Backup</td>
                            <td>Creates a backup of the entire Huntarr system</td>
                        </tr>
                        <tr>
                            <td>Sonarr</td>
                            <td>
                                Missing Episodes Scan<br>
                                Upgrade Episodes<br>
                                Upgrade Season Packs<br>
                                Upgrade Shows
                            </td>
                            <td>
                                Scans for missing episodes<br>
                                Upgrades individual episodes that don't meet quality cutoff<br>
                                Upgrades all episodes in selected seasons<br>
                                Upgrades all episodes in selected shows
                            </td>
                        </tr>
                        <tr>
                            <td>Radarr</td>
                            <td>
                                Missing Movies Scan<br>
                                Upgrade Movies
                            </td>
                            <td>
                                Scans for missing movies<br>
                                Upgrades movies that don't meet quality cutoff
                            </td>
                        </tr>
                        <tr>
                            <td>Lidarr</td>
                            <td>
                                Missing Albums Scan<br>
                                Upgrade Albums
                            </td>
                            <td>
                                Scans for missing albums<br>
                                Upgrades albums that don't meet quality cutoff
                            </td>
                        </tr>
                        <tr>
                            <td>Readarr</td>
                            <td>
                                Missing Books Scan<br>
                                Upgrade Books
                            </td>
                            <td>
                                Scans for missing books<br>
                                Upgrades books that don't meet quality cutoff
                            </td>
                        </tr>
                        <tr>
                            <td>Whisparr</td>
                            <td>
                                Missing Scenes Scan<br>
                                Upgrade Scenes
                            </td>
                            <td>
                                Scans for missing scenes<br>
                                Upgrades scenes that don't meet quality cutoff
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="content-section">
            <h2 class="section-header">Managing Schedules</h2>
            <p>
                You can manage your existing schedules in several ways:
            </p>
            
            <div class="features-grid">
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path>
                        </svg>
                    </div>
                    <div class="feature-details">
                        <h3>Editing Schedules</h3>
                        <p>
                            Click the edit icon next to any schedule to modify its settings. 
                            You can change the time, days, action, or toggle whether it's enabled.
                        </p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"></path>
                        </svg>
                    </div>
                    <div class="feature-details">
                        <h3>Deleting Schedules</h3>
                        <p>
                            To remove a schedule, click the delete icon. You'll be asked to confirm before 
                            the schedule is permanently removed.
                        </p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon">
                        <svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"></path>
                        </svg>
                    </div>
                    <div class="feature-details">
                        <h3>Enabling/Disabling Schedules</h3>
                        <p>
                            Toggle the enabled switch to temporarily pause or resume a schedule without deleting it.
                            This is useful for seasonal or occasional schedules.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="content-section">
            <h2 class="section-header">Technical Details</h2>
            <p>
                For those interested in the technical implementation:
            </p>
            
            <div class="code-block">
                <h3>Schedule Data Structure</h3>
                <pre><code>{
  "global": [
    {
      "id": "global-backup-123",
      "time": "02:00",
      "days": ["mon", "wed", "fri"],
      "action": "system_backup",
      "enabled": true,
      "appType": "global"
    }
  ],
  "sonarr": [
    {
      "id": "sonarr-upgrade-456",
      "time": "03:15",
      "days": ["sun"],
      "action": "upgrade_episodes",
      "app": "Sonarr-4K",
      "enabled": true,
      "appType": "sonarr"
    }
  ],
  "radarr": [...],
  "lidarr": [...],
  "readarr": [...],
  "whisparr": [...]
}</code></pre>
            </div>
            
            <p>Key implementation details:</p>
            <ul>
                <li>
                    <strong>Storage:</strong> Schedules are stored in JSON format at <code>/config/scheduler/schedule.json</code> 
                    within the Docker container
                </li>
                <li>
                    <strong>API Endpoints:</strong> The scheduler uses <code>/api/scheduler/load</code> and 
                    <code>/api/scheduler/save</code> endpoints
                </li>
                <li>
                    <strong>Structure:</strong> Schedules are organized by app type with each schedule having properties: 
                    id, time, days, action, app, enabled, and appType
                </li>
                <li>
                    <strong>Execution:</strong> A background process checks for due schedules every minute and executes 
                    the appropriate action when a schedule's time is reached
                </li>
            </ul>
        </div>
        
        <div class="content-section">
            <h2 class="section-header">Best Practices</h2>
            
            <div class="info-box">
                <div class="info-title">
                    <svg class="svg-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6A4.997 4.997 0 0 1 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"></path>
                    </svg>
                    Tips for Effective Scheduling
                </div>
                <ul>
                    <li>
                        <strong>Stagger Your Schedules:</strong> Avoid having multiple resource-intensive tasks run at the same time.
                        Space them out to avoid overloading your system.
                    </li>
                    <li>
                        <strong>Off-Peak Hours:</strong> Schedule intensive operations like upgrades during off-peak hours
                        when you're less likely to be using your media applications.
                    </li>
                    <li>
                        <strong>Regular Maintenance:</strong> Schedule routine tasks like missing content scans to run daily,
                        while more intensive operations like upgrades can be less frequent.
                    </li>
                    <li>
                        <strong>Check History:</strong> Review the History tab to ensure your scheduled tasks are running properly
                        and take appropriate action if any fails.
                    </li>
                </ul>
            </div>
        </div>
        
        <div class="content-section">
            <h2 class="section-header">Troubleshooting</h2>
            
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">Schedules not running?</div>
                    <div class="faq-answer">
                        <p>Check the following:</p>
                        <ul>
                            <li>Verify the schedule is enabled (toggle switch is on)</li>
                            <li>Check that the current day is selected in the schedule's days</li>
                            <li>Confirm the target application instance is online and configured properly</li>
                            <li>Review the logs for any errors related to the scheduler</li>
                        </ul>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">Schedule runs but action fails?</div>
                    <div class="faq-answer">
                        <p>This usually indicates an issue with the target application:</p>
                        <ul>
                            <li>Verify API access to the application instance</li>
                            <li>Check that your API keys are correct and have not expired</li>
                            <li>Confirm the application instance is not overloaded with other tasks</li>
                            <li>Review the application's own logs for errors</li>
                        </ul>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">Schedules disappeared after update?</div>
                    <div class="faq-answer">
                        <p>If schedules are missing after updating Huntarr:</p>
                        <ul>
                            <li>Check if your Docker container is using a persistent volume for the <code>/config</code> directory</li>
                            <li>Verify the permissions on the <code>/config/scheduler</code> directory</li>
                            <li>Look for backup files in the same directory with names like <code>schedule.json.bak</code></li>
                            <li>If necessary, restore from a backup or recreate your schedules</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <p>&copy; 2025 Huntarr.io - Developed by Admin9705</p>
            </div>
            <div class="footer-section">
                <p>Version 6.5.15</p>
            </div>
        </div>
    </div>
</body>
</html>
